<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Video Player</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    select, button { margin: 10px; padding: 5px; }
    iframe { border: none; width: 640px; height: 360px; }
  </style>
</head>
<body>
  <h1>Random Video Player</h1>
  <label for="genre">Select Genre:</label>
  <select id="genre">
    <option value="all">All</option>
    <option value="big-ass">Big Ass</option>
    <option value="blowjob">Blowjob</option>
    <option value="brazzers">Brazzers</option>
    <option value="bangbros">Bangbros</option>
    <option value="milf">Milf</option>
  </select>
  <br>
  <button onclick="playRandomVideo()">Play Random Video</button>
  <div id="videoContainer"></div>

  <script>
    // Populate genre dropdown with additional Pornhub categories on page load
    window.onload = async function() {
      try {
        const response = await fetch("https://www.pornhub.com/webmasters/categories");
        if (!response.ok) {
          throw new Error("Failed to fetch categories");
        }
        const data = await response.json();
        const categories = data.categories;
        const genreSelect = document.getElementById("genre");
        // Keep predefined options and add API categories
        const predefined = ["all", "big-ass", "blowjob", "brazzers", "bangbros", "milf"];
        categories.forEach(category => {
          if (!predefined.includes(category.category)) {
            const option = document.createElement("option");
            option.value = category.category;
            option.textContent = category.category.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
            genreSelect.appendChild(option);
          }
        });
      } catch (error) {
        console.error("Error fetching categories:", error);
      }
    }

    // Fetch and play a random video from Pornhub
    async function playRandomVideo() {
      try {
        const genre = document.getElementById("genre").value;
        let url = "https://www.pornhub.com/webmasters/search?ordering=random";
        // Handle studios (brazzers, bangbros) as search terms, others as categories
        if (genre === "brazzers" || genre === "bangbros") {
          url += `&search=${encodeURIComponent(genre)}`;
        } else if (genre !== "all") {
          url += `&category=${encodeURIComponent(genre)}`;
        }
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error("Network response was not ok");
        }
        const data = await response.json();
        const videos = data.videos;
        if (videos && videos.length > 0) {
          // Pick a random video from the list
          const randomIndex = Math.floor(Math.random() * videos.length);
          const randomVideo = videos[randomIndex];
          const embedUrl = randomVideo.embed.iframe;
          const videoContainer = document.getElementById("videoContainer");
          // Embed the video in an iframe
          videoContainer.innerHTML = `<iframe src="${embedUrl}" allowfullscreen></iframe>`;
        } else {
          console.error("No videos found");
          videoContainer.innerHTML = "<p>No videos available.</p>";
        }
      } catch (error) {
        console.error("Error fetching video:", error);
        const videoContainer = document.getElementById("videoContainer");
        videoContainer.innerHTML = "<p>Error loading video. Please try again.</p>";
      }
    }
  </script>
</body>
</html>